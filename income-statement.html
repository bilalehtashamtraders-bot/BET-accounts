<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Income Statement - BET</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            color: #333;
        }
        .header {
            text-align: center;
            border-bottom: 2px solid #003366;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .header h1 {
            font-size: 28px;
            font-weight: bold;
            color: #003366;
            margin: 0;
        }
        .company-info {
            font-size: 14px;
            margin-top: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .category-header {
            font-weight: bold;
            background-color: #e6e6e6;
        }
        .total-row {
            font-weight: bold;
            background-color: #d1e0e6;
        }
        .net-income-row {
            font-weight: bold;
            background-color: #b3cdd1;
            border-top: 2px solid #003366;
        }
    </style>
</head>
<body>
    <script src="data.js"></script>

    <div class="header">
        <h1>Income Statement</h1>
        <div class="company-info">
            <h2>(BET) Bilal Ehtasham Traders</h2>
            <p>For the period ending: <span id="reportDate"></span></p>
        </div>
    </div>

    <table>
        <thead>
            <tr class="category-header">
                <td>Revenues</td>
                <td>Amount (PKR)</td>
            </tr>
        </thead>
        <tbody id="revenue-body">
            </tbody>
        <tfoot>
            <tr class="total-row">
                <td>Total Revenues</td>
                <td id="total-revenue"></td>
            </tr>
        </tfoot>
    </table>

    <table>
        <thead>
            <tr class="category-header">
                <td>Expenses</td>
                <td>Amount (PKR)</td>
            </tr>
        </thead>
        <tbody id="expense-body">
            </tbody>
        <tfoot>
            <tr class="total-row">
                <td>Total Expenses</td>
                <td id="total-expense"></td>
            </tr>
        </tfoot>
    </table>

    <table>
        <tfoot>
            <tr class="net-income-row">
                <td>Net Income (Profit/Loss)</td>
                <td id="net-income"></td>
            </tr>
        </tfoot>
    </table>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('reportDate').textContent = new Date().toLocaleDateString('en-GB');
            renderIncomeStatement();
        });

        function renderIncomeStatement() {
            const revenueBody = document.getElementById('revenue-body');
            const expenseBody = document.getElementById('expense-body');
            let totalRevenue = 0;
            let totalExpense = 0;

            revenueBody.innerHTML = '';
            expenseBody.innerHTML = '';

            ledger.forEach(entry => {
                if (entry.accountType === 'Revenue') {
                    const amount = entry.debit - entry.credit;
                    totalRevenue += amount;
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `<td>${entry.description}</td><td>${amount.toLocaleString('en-US')}</td>`;
                    revenueBody.appendChild(newRow);
                } else if (entry.accountType === 'Expense') {
                    const amount = entry.debit - entry.credit;
                    totalExpense -= amount; // Expenses are negative from a debit/credit standpoint
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `<td>${entry.description}</td><td>${Math.abs(amount).toLocaleString('en-US')}</td>`;
                    expenseBody.appendChild(newRow);
                }
            });

            const netIncome = totalRevenue - totalExpense;

            document.getElementById('total-revenue').textContent = totalRevenue.toLocaleString('en-US');
            document.getElementById('total-expense').textContent = totalExpense.toLocaleString('en-US');
            document.getElementById('net-income').textContent = netIncome.toLocaleString('en-US');
        }
    </script>
</body>
</html>
